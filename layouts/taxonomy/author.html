{{ define "main" }}
<!-- Look up author info from data file -->
{{ $authorName := .Title | urlize }} {{ $authorInfo := index .Site.Data.authors
$authorName | default dict }}

<!-- Applying the 20/80% layout only for author info section -->
<article class="category-section" itemscope itemtype="https://schema.org/Person">
  <!-- Left column (20%) for the title -->
  <header class="category-header">
    <h1 class="taxonomy-term" itemprop="name">{{ .Title }}</h1>
  </header>
  
  <!-- Right column (80%) for author info -->
  <div class="category-grid">
    <!-- Author bio from data file if exists -->
    {{ if or .Content $authorInfo }}
    <div class="author-bio-section markdown-body">
      <div class="author-content-wrapper">
        <div class="author-image-container">
          <!-- Author image if available -->
          {{ if $authorInfo.image }}
          <img
            src="{{ $authorInfo.image }}"
            alt="{{ .Title }}"
            class="author-image"
            itemprop="image"
          />
          {{ end }}
        </div>
        
        <div class="author-info-container">
          <!-- Author bio if available -->
          {{ if $authorInfo.bio }}
          <div class="author-bio" itemprop="description">{{ $authorInfo.bio }}</div>
          {{ end }}

          <!-- Author social links if available -->
          {{ if or $authorInfo.twitter $authorInfo.website }}
          <div class="author-social">
            {{ if $authorInfo.twitter }}
            <a
              href="https://twitter.com/{{ $authorInfo.twitter }}"
              target="_blank"
              rel="noopener"
              class="author-social-link"
              itemprop="sameAs"
              >Twitter</a
            >
            {{ end }} {{ if $authorInfo.website }}
            <a
              href="{{ $authorInfo.website }}"
              target="_blank"
              rel="noopener"
              class="author-social-link"
              itemprop="sameAs"
              >Website</a
            >
            {{ end }}
          </div>
          {{ end }}

      <!-- Content from author markdown page if it exists -->
      {{ with .Content }}
      <div class="author-content">{{ . }}</div>
      {{ end }}
        </div>
      </div>
    </div>
    {{ end }}
  </div>
</article>

<!-- Posts list as a separate section with its own 20/80 layouts per year -->
<main id="posts-list">
  {{ range .Pages.GroupByDate "2006" }}
  <section class="category-section" aria-labelledby="year-{{ .Key }}">
    <header class="category-header">
      <h2 id="year-{{ .Key }}" class="site-date-catalog">{{ .Key }}</h2>
    </header>

    <div class="article-grid category-grid">
      {{ range .Pages }} {{ partial "article-card.html" . }} {{ end }}
    </div>
  </section>
  {{ end }}
</main>
{{ end }}
